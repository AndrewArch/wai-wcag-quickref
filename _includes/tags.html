<div class="panel panel-default" id="tags">
<div class="panel-heading">Tags</div>
<div class="panel-body">
{% for sc in site.successcriteria %}
  {% for tag in sc.tags %}
    {% assign taglist = taglist | append: '||' | append: tag %}
    {% assign tagcount.tag = tagcount.tag | plus:1 %}
  {% endfor %}
{% endfor %}


{% assign splittaglist = taglist | split: '||' | sort %}

{% assign currenttag = "" %}
{% assign tagcount = 0 %}
{% assign firsttag = true %}
{% for tag in splittaglist %}
  {% assign tagcount = tagcount | plus: 1 %}
  {% unless currenttag == tag %}
    {% assign currenttag = tag %}
    {% comment %}{% unless firsttag %}{{tagcount}}</a>{% endunless %}{% endcomment %} <button data-tag="{{tag}}" class="btn btn-default btn-sm">{{tag}}</button>
    {% assign tagcount = 0 %}
    {% assign firsttag = false %}
  {% endunless %}
  {% comment %}{%if forloop.last %}{{tagcount}}</a>{%endif%}{% endcomment %}
{% endfor %}
</div>
</div>